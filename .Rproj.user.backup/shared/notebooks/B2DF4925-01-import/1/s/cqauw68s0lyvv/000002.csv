"0","## This is a custom function I wrote that "
"0","## pulls data from the TidyCensus API about"
"0","## the population count of people under five "
"0","## years old and about spatial features "
"0","## for each census tract. I have commented it "
"0","## out and saved the result in an RDS file"
"0","## so as to not make a new call to the API "
"0","## every time this script is run. You can"
"0","## inspect the function definition in the "
"0","## modules folder of the source code."
"0",""
"0","# coords_and_pop_est <- "
"0","#     sids_data_wrangling$get_coords_and_pop_est(raw)"
"0","# "
"0","# saveRDS(coords_and_pop_est, ""data/coords_and_pop_est.RDS"")"
"0",""
"0","coords_and_pop_est <- readRDS(""data/coords_and_pop_est.RDS"")"
"0",""
"0","sids_df <- "
"0","    # Take population estimates"
"0","    coords_and_pop_est %>%"
"0","    # Drop geospatial features"
"0","    st_set_geometry(NULL) %>%"
"0","    # Convert to tibble format"
"0","    as_tibble() %>%"
"0","    # And join to dataset"
"0","    full_join(raw) %>%"
"0","    # Add new variables"
"0","    mutate("
"0","        # Binary variable on whether SIDS is present in a tract"
"0","        sids_present = case_when("
"0","            count_asphyxia > 0 ~ TRUE,"
"0","            TRUE ~ FALSE"
"0","        )"
"0","    ) %>%"
"0","    # Rename variables for consistency"
"0","    rename("
"0","        sids = count_asphyxia,"
"0","        foreign_born = pe_foreignborn,"
"0","        married_males = pe_marriedmales,"
"0","        married_females = pe_marriedfemales,"
"0","        divorced_widowed_males = pedivorcewidowedmale,"
"0","        divorced_widowed_females = pedivorcewidowedfemale,"
"0","        lt_high_school = pelessthanhighschool,"
"0","        high_school_diploma = highschooldiploma,"
"0","        some_college = somecollege,"
"0","        college_diploma = collegediploma,"
"0","        employed = percent_enployed,"
"0","        income_lt_10 = incomelt10,"
"0","        income_lt_25 = incomelt25,"
"0","        income_lt_50 = incomelt50,"
"0","        income_lt_75 = incomelt75,"
"0","        income_gt_75 = incomegt75,"
"0","        private_insurance = privateinsurance,"
"0","        public_insurance = publicinsurance,"
"0","        no_insurance = noinsurance"
"0","    )"
"1","[38;5;251mJoining, by = ""fips""[39m
"
"0","# Preview the data"
"0","glimpse(sids_df)"
"1","Rows: 1,315"
"1",""
"1","
"
"1","Columns: 33"
"1",""
"1","
"
"1","$ fips                                 [3m[38;5;246m<dbl>[39m[23m 17031807500, 17031440300, 17031480300, 17031803605, 1703106â€¦
$ pop_under_five                       [3m[38;5;246m<dbl>[39m[23m 151, 192, 21, 506, 215, 155, 371, 115, 64, 180, 402, 285, 4â€¦
$ sids                                 [3m[38;5;246m<dbl>[39m[23m 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 0, 0, 0,â€¦
$ count_opioid_death                   [3m[38;5;246m<dbl>[39m[23m 1, 7, 2, 2, 6, 1, 4, 0, 5, 7, 3, 9, 12, 8, 9, 11, 3, 7, 4, â€¦
$ svi_socioeconomic                    [3m[38;5;246m<dbl>[39m[23m 0.1269, 0.5930, 0.6460, 0.3630, 0.1972, 0.0514, 0.9120, 0.3â€¦
$ svi_household_composition_disability [3m[38;5;246m<dbl>[39m[23m 0.1728, 0.8038, 0.7550, 0.1201, 0.0315, 0.0234, 0.6969, 0.5â€¦
$ svi_minority_language                [3m[38;5;246m<dbl>[39m[23m 0.7024, 0.6770, 0.7172, 0.7323, 0.5933, 0.1778, 0.9644, 0.7â€¦
$ svi_housing_transportation           [3m[38;5;246m<dbl>[39m[23m 0.3690, 0.5286, 0.3398, 0.6172, 0.7010, 0.7656, 0.6352, 0.3â€¦
$ svi_summary_ranking                  [3m[38;5;246m<dbl>[39m[23m 0.2470, 0.6794, 0.6486, 0.4285, 0.2245, 0.0835, 0.8995, 0.4â€¦
$ foreign_born                         [3m[38;5;246m<dbl>[39m[23m 31.6, 2.0, 1.3, 27.0, 19.9, 19.4, 37.3, 33.4, 22.3, 16.9, 1â€¦
$ married_males                        [3m[38;5;246m<dbl>[39m[23m 62.5, 23.0, 37.9, 59.0, 29.1, 33.4, 47.3, 61.6, 14.8, 22.1,â€¦
$ married_females                      [3m[38;5;246m<dbl>[39m[23m 56.6, 23.0, 21.0, 54.2, 22.5, 27.2, 48.8, 42.8, 14.4, 16.8,â€¦
$ divorced_widowed_males               [3m[38;5;246m<dbl>[39m[23m 6.4, 16.9, 7.1, 11.1, 9.7, 3.9, 5.4, 11.5, 10.1, 9.3, 8.2, â€¦
$ divorced_widowed_females             [3m[38;5;246m<dbl>[39m[23m 16.8, 34.7, 36.2, 18.2, 9.0, 5.3, 8.2, 17.2, 22.4, 16.3, 16â€¦
$ lt_high_school                       [3m[38;5;246m<dbl>[39m[23m 7.1, 9.2, 8.0, 6.2, 4.0, 0.0, 36.5, 9.0, 8.0, 2.5, 12.0, 20â€¦
$ high_school_diploma                  [3m[38;5;246m<dbl>[39m[23m 14.6, 28.4, 22.8, 19.7, 7.5, 3.6, 40.2, 13.8, 11.7, 2.3, 12â€¦
$ some_college                         [3m[38;5;246m<dbl>[39m[23m 12.8, 26.4, 31.8, 16.6, 11.8, 7.1, 13.3, 15.1, 13.8, 14.7, â€¦
$ college_diploma                      [3m[38;5;246m<dbl>[39m[23m 65.5, 36.0, 37.3, 57.6, 76.7, 89.2, 10.0, 62.2, 66.6, 80.6,â€¦
$ black                                [3m[38;5;246m<dbl>[39m[23m 2.5, 97.4, 96.9, 3.0, 7.9, 3.6, 1.9, 4.3, 14.6, 7.6, 39.3, â€¦
$ white                                [3m[38;5;246m<dbl>[39m[23m 58.3, 0.7, 1.5, 76.6, 82.7, 85.4, 48.9, 64.1, 68.2, 79.8, 4â€¦
$ hispanic                             [3m[38;5;246m<dbl>[39m[23m 5.6, 0.0, 2.2, 15.2, 16.3, 7.7, 84.4, 11.7, 8.1, 17.1, 13.9â€¦
$ male                                 [3m[38;5;246m<dbl>[39m[23m 48.8, 50.8, 39.5, 49.0, 49.0, 45.6, 48.9, 41.3, 48.2, 46.3,â€¦
$ employed                             [3m[38;5;246m<dbl>[39m[23m 61.6, 49.0, 41.5, 69.5, 81.8, 84.3, 56.3, 61.3, 66.1, 75.5,â€¦
$ income_lt_10                         [3m[38;5;246m<dbl>[39m[23m 0.0, 15.7, 10.9, 2.7, 3.5, 6.2, 3.4, 0.8, 17.4, 13.9, 13.9,â€¦
$ income_lt_25                         [3m[38;5;246m<dbl>[39m[23m 3.6, 15.6, 22.6, 9.5, 11.4, 3.7, 16.1, 9.0, 12.0, 7.8, 13.6â€¦
$ income_lt_50                         [3m[38;5;246m<dbl>[39m[23m 10.9, 15.9, 25.2, 22.8, 21.4, 15.6, 36.6, 12.9, 12.4, 11.8,â€¦
$ income_lt_75                         [3m[38;5;246m<dbl>[39m[23m 15.7, 27.6, 14.1, 10.5, 23.4, 21.6, 17.8, 12.2, 18.9, 14.0,â€¦
$ income_gt_75                         [3m[38;5;246m<dbl>[39m[23m 69.8, 25.3, 27.1, 54.5, 40.1, 52.7, 26.0, 64.9, 39.2, 52.5,â€¦
$ private_insurance                    [3m[38;5;246m<dbl>[39m[23m 78.9, 55.5, 53.9, 70.3, 83.1, 89.6, 40.4, 82.5, 79.8, 86.3,â€¦
$ public_insurance                     [3m[38;5;246m<dbl>[39m[23m 26.4, 43.5, 52.9, 27.8, 16.9, 13.0, 49.1, 24.6, 24.9, 19.2,â€¦
$ no_insurance                         [3m[38;5;246m<dbl>[39m[23m 2.8, 12.2, 13.0, 9.3, 6.6, 7.5, 16.7, 1.9, 4.6, 2.8, 6.4, 1â€¦
$ spanish_language                     [3m[38;5;246m<dbl>[39m[23m 6.0, 2.1, 0.7, 11.3, 12.2, 6.0, 76.4, 6.1, 5.3, 8.7, 5.9, 1â€¦
$ sids_present                         [3m[38;5;246m<lgl>[39m[23m FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSâ€¦"
"1",""
"1","
"
